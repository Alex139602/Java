package teamseer_core_api;
import javax.activation.*;
import javax.xml.namespace.QName;
import javax.xml.rpc.Call;
import javax.xml.rpc.Service;
import javax.xml.rpc.ServiceException;
import javax.xml.rpc.encoding.TypeMappingRegistry;
import javax.xml.rpc.handler.HandlerRegistry;

import java.net.MalformedURLException;
import java.net.URI;
import java.net.URL;
import java.nio.charset.MalformedInputException;
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.Iterator;

public class TimeMangerConnection {
	
	public static final String teamSeerWSDLloc = "https://www.teamseer.com/services/soap/coreapi/1_0_0/teamseer_core_api.wsdl";
	public static final String teamSeerPwd = "3795bae113";
	public static final String teamSeerVersion = "1_0_0";
	
	public static void main(String[] args) {
		try {
			
			Teamseer_core_apiServiceLocator loc = new Teamseer_core_apiServiceLocator();
			Service webService = (Service) loc.getteamseer_core_apiPort();
			Teamseer_core_apiBindingStub stub = new Teamseer_core_apiBindingStub(new URL( "https", "www.teamseer.com", "/services/soap/coreapi/1_0_0/teamseer_core_api.wsdl"), webService);
			loc.getteamseer_core_apiPort();
			
			
			stub.setMaintainSession(true);
			boolean isAuthenticated = stub.authenticate(1576, teamSeerPwd , teamSeerVersion);
			
			if (isAuthenticated) {
				String[] users = stub.getActiveUsers();
				System.out.println(users.toString());
			}
			
			
			
			System.out.println(isAuthenticated);
			
		} catch (RemoteException | MalformedURLException | ServiceException e) {
			System.out.println(e.getMessage());
			e.printStackTrace();
		}
		
	}

}
