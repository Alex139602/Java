package teamseer_core_api;

import javax.jws.WebService;
import javax.xml.rpc.ServiceException;
import java.rmi.RemoteException;
import java.util.Arrays;
import java.util.Date;



@WebService 
public class TimeMangerConnection {
	
	public static final String teamSeerWSDLloc = "https://www.teamseer.com/services/soap/coreapi/1_0_0/teamseer_core_api.wsdl";
	public static final String fullWSDLurl = "https://www.teamseer.com/services/soap/coreapi/1_0_0/teamseer_core_api.wsdl";
	public static final String teamSeerPwd = "3795bae113";
	public static final String teamSeerVersion = "1_0_0";
	
	
	public static void main(String[] args) {
		
		try {
			
			Teamseer_core_apiServiceLocator loc = new Teamseer_core_apiServiceLocator();
			Teamseer_core_apiPortType stub = loc.getteamseer_core_apiPort();
			Teamseer_core_apiPortTypeProxy testProxy = new Teamseer_core_apiBindingStub();
			System.out.println(loc.getMaintainSession());
			loc.setMaintainSession(true);
			System.out.println("Setting maintain session to: " + loc.getMaintainSession() );
			boolean isAuthenticated = stub.authenticate(1576, teamSeerPwd , teamSeerVersion);
			
			System.out.println( "Authenticated: " + isAuthenticated );
			
			String[] users = stub.getActiveUsers();
			
			System.out.println(Arrays.toString(users));
			
			
			
			
		} catch (RemoteException | ServiceException e) {
			System.out.println(e.getMessage());
			e.printStackTrace();
		}
		
	} // end of main
	
	
	public void doStuff(){
		/*if (isAuthenticated) {
			
			String[] usersNow = stubHub.getActiveUsers();
			System.out.println(Arrays.toString(users) + "\n" + "Number of users: " + users.length );
			
			stub.getRecordsFor("1", "01/01/2015", "06/06/2015");
			//DayActivityAPI[] dayArray = stub.getChangesSinceLastAPIRequest();
			//System.out.println(" number of changes since: " + dayArray.length);
			
			DayActivityAPI[] myInfo = stub.getRecordsFor("phunnisett@splashworldwide.com", "01/01/2015", "06/06/2015");
			
			
			System.out.println(Arrays.toString(myInfo));
			for (int i = 0; i < users.length; i++) {
				if (users[i].equalsIgnoreCase("phunnisett@splashworldwide.com")) {
					System.out.println("phil here");
				}
			}
			
			System.out.println(Arrays.toString(usersNow));
			System.out.println();
		
		}
		
		
		
		
		
		System.out.println(isNowAuthenticated);
		if (isNowWorking) {
		
			String[] usersNow = stubHub.getActiveUsers();
			if (users.equals(usersNow)) {
				System.out.println("equal");
			}
			System.out.println(Arrays.toString(usersNow));
		}
		*/
	
	}

}
